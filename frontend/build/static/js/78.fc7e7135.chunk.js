(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[78],{756:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var c=n(63),a=n.n(c),r=n(112),s=n(48),i=n(1),o=n.n(i),d=n(20),u=n(113),p=n(83),h=n(626),l=n(677),j=n.n(l),b=n(11);function x(){var e=o.a.useContext(p.b),t=e.user,n=e.setLoad,c=o.a.useState([]),i=Object(s.a)(c,2),l=i[0],x=i[1],f=o.a.useState([]),m=Object(s.a)(f,2),O=(m[0],m[1],o.a.useState([])),k=Object(s.a)(O,2),w=(k[0],k[1]),y=o.a.useState(!1),v=Object(s.a)(y,2),_=(v[0],v[1]),P=Object(d.i)().id;o.a.useEffect((function(){function e(){return(e=Object(r.a)(a.a.mark((function e(){var c,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(u.d+"RolePermissionPage/"+P,{headers:{Authorization:t.token}});case 2:if(!0!==(c=e.sent).ok){e.next=11;break}return e.next=6,c.json();case 6:r=e.sent,n(!1),x(r.parent_permission_list),w(null===r||void 0===r?void 0:r.permissioBasedRole),_(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(!0),_(!0),function(){e.apply(this,arguments)}()}),[P]);return l.map((function(e){for(var t=j()(".".concat(e.Parent_name," > input")),n=0;n<t.length;n++){var c=t[n],a=j()(c).attr("data-type");"View"==a&&"checked"==e.View&&(c.checked=!0),"Add"==a&&"checked"==e.Add&&(c.checked=!0),"Edit"==a&&"checked"==e.Edit&&(c.checked=!0),"Delete"==a&&"checked"==e.Delete&&(c.checked=!0)}})),Object(b.jsxs)("section",{className:"parent_permission",children:[Object(b.jsx)(h.a,{}),Object(b.jsxs)("table",{class:"table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col"}),Object(b.jsx)("th",{scope:"col",children:"View"}),Object(b.jsx)("th",{scope:"col",children:"Add"}),Object(b.jsx)("th",{scope:"col",children:"Edit"}),Object(b.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(b.jsx)("tbody",{children:l.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:e.Parent_name}),Object(b.jsx)("td",{className:"".concat(e.Parent_name),children:Object(b.jsx)("input",{"data-type":"View",type:"checkbox"})}),Object(b.jsx)("td",{className:"".concat(e.Parent_name),children:Object(b.jsx)("input",{"data-type":"Add",type:"checkbox"})}),Object(b.jsx)("td",{className:"".concat(e.Parent_name),children:Object(b.jsx)("input",{"data-type":"Edit",type:"checkbox"})}),Object(b.jsx)("td",{className:"".concat(e.Parent_name),children:Object(b.jsx)("input",{"data-type":"Delete",type:"checkbox"})})]})}))})]}),Object(b.jsx)("button",{className:"btn btn-primary",onClick:function(){return function(e){var c={};n(!0);for(var s=0;s<l.length;s++){var i=[],o=j()(".".concat(l[s].Parent_name," > input:checked"));if(o.length>0){for(var d=0;d<o.length;d++){var p=o[d];i.push(j()(p).attr("data-type"))}c[l[s].id]=i}else c[l[s].id]=[]}function b(){return(b=Object(r.a)(a.a.mark((function e(){var r,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),(r=new FormData).append("permission_id",JSON.stringify(c)),r.append("role_id",P),e.next=6,fetch(u.d+"createPermission/",{method:"POST",headers:{Authorization:t.token},body:r});case 6:if(1!=(s=e.sent).ok){e.next=23;break}return e.next=10,s.json();case 10:if(i=e.sent,n(!1),200!=i.status){e.next=17;break}return _(!1),e.abrupt("return",window.location.reload());case 17:if(404!=i.status){e.next=21;break}return e.abrupt("return",window.location=window.location.origin+"/#/404");case 21:h.b.error(i.message),_(!1);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){b.apply(this,arguments)}()}()},children:"Submit"})]})}}}]);
//# sourceMappingURL=78.fc7e7135.chunk.js.map