{"version":3,"sources":["screens/Vehicles/Create.js"],"names":["Create","React","useContext","userContext","user","setLoad","useState","name","setName","image","setImage","serialNumber","setSerialNumber","plateNumber","setPlateNumber","transmissionType","setTransmissionType","drivenWheels","setDrivenWheels","allClients","setAllClients","currentClient","setCurrentClient","useEffect","a","fetch","url","headers","token","response","ok","json","data","status","client_list","map","item","value","id","label","toast","error","message","fetchData","catch","err","className","onSubmit","e","formData","FormData","append","method","body","window","location","origin","preventDefault","submit","handleSubmit","class","for","required","onChange","target","type","options","files","href","URL","createObjectURL","src","style","width","height","alt","onClick","reload","aria-hidden"],"mappings":"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","file":"static/js/81.b65edc7e.chunk.js","sourcesContent":["import React from 'react'\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport { url } from 'src/helpers/helpers';\r\nimport { userContext } from '../../context/UserContext';\r\nimport Select from 'react-select'\r\n\r\nexport default function Create() {\r\n    const { user,setLoad } = React.useContext(userContext);\r\n    const [name, setName] = React.useState('');\r\n    const [image, setImage] = React.useState('');\r\n    const [serialNumber, setSerialNumber] = React.useState('');\r\n    const [plateNumber, setPlateNumber] = React.useState('');\r\n    const [transmissionType, setTransmissionType] = React.useState('');\r\n    const [drivenWheels, setDrivenWheels] = React.useState('');\r\n    const [allClients, setAllClients] = React.useState([]);\r\n    const [currentClient, setCurrentClient] = React.useState('');\r\n\r\n    const handleSubmit = e => {\r\n        setLoad(true)\r\n        e.preventDefault();\r\n        async function submit(){\r\n            const formData = new FormData();\r\n            formData.append('car_name',name);\r\n            formData.append('car_image',image);\r\n            formData.append('serial_number',serialNumber);\r\n            formData.append('plate_number',plateNumber);\r\n            formData.append('transmission_type',transmissionType);\r\n            formData.append('driven_wheels',drivenWheels);\r\n            formData.append('client_id',currentClient.value);\r\n            formData.append('client_name',currentClient.label);\r\n            \r\n            const response = await fetch(url + 'createvehicle',{\r\n                method : 'POST',\r\n                headers : {\r\n                    'Authorization' : user?.token\r\n                },\r\n                body : formData\r\n            });\r\n\r\n            if (response.ok === true){\r\n                const data = await response.json();\r\n                setLoad(false)\r\n                if (data.status == 200){\r\n                    window.location = window.location.origin + '/#/vehicleList';\r\n                }else{\r\n                    toast.error(data.message)\r\n                }\r\n            }else{\r\n                toast.error('Oops something went wrong!')\r\n            }\r\n        }\r\n        submit().catch(err=>toast.error('Internal server error. Please try again later'))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setLoad(true)\r\n        async function fetchData() {\r\n            const response = await fetch(url + 'clientlist', {\r\n                headers: {\r\n                    'Authorization': user?.token,\r\n                }\r\n            });\r\n\r\n            if (response.ok === true) {\r\n                const data = await response.json();\r\n                setLoad(false)\r\n                if (data.status == 200) {\r\n                    setAllClients(data.client_list.map(item => {\r\n                        return {\r\n                            value: item.id,\r\n                            label: item.name\r\n                        }\r\n                    }))\r\n                } else {\r\n                    toast.error(data.message);\r\n                }\r\n            } else {\r\n                toast.error('Oops something went wrong!');\r\n            }\r\n        }\r\n        fetchData().catch(err => toast.error('Internal Server Error. Please try again later!'))\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"container create-page-main-section\">\r\n            <ToastContainer />\r\n            <form onSubmit={e => handleSubmit(e)}>\r\n                <div className='p-sm-5 create-form-field'>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Vehicle Name:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input required value={name} onChange={e => setName(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Serial Number:</label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input value={serialNumber} onChange={e => setSerialNumber(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Plate Number:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input required value={plateNumber} onChange={e => setPlateNumber(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Transmission Type:</label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <select className=\"form-control\" value={transmissionType} onChange={e => setTransmissionType(e.target.value)}>\r\n                                <option value=\"Automatic Transmission\">Automatic Transmission (AT)</option>\r\n                                <option value=\"Manual Transmission\">Manual Transmission (MT)</option>\r\n                                <option value=\"Automated Manual Transmission\">Automated Manual Transmission (AM)</option>\r\n                                <option value=\"Continuously Variable Transmission\">Continuously Variable Transmission (CVT)</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Client:</label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <Select className=\"form-control\" options={allClients} value={currentClient} onChange={setCurrentClient} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Choose Image:</label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input type=\"file\" onChange={e => setImage(e.target.files[0])} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {image && <div className=\"form-group\">\r\n                        <a href={URL.createObjectURL(image)} target=\"_blank\">\r\n                            <img src={URL.createObjectURL(image)} style={{ width: '100%',height:200 }} alt=\"\" />\r\n                        </a>\r\n                    </div>}\r\n\r\n\r\n\r\n                    <div class=\"form-group row\">\r\n                        <label class=\"col-sm-2 col-form-label\" for=\"exampleFormControlTextarea1\">Driven Wheels:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <select className=\"form-control\" value={drivenWheels} onChange={e => setDrivenWheels(e.target.value)}>\r\n                                <option value=\"Front-wheel drive\">Front-wheel drive</option>\r\n                                <option value=\"Rear-wheel drive\">Rear-wheel drive</option>\r\n                                <option value=\"Two-wheel drive\">Two-wheel drive</option>\r\n                                <option value=\"All-wheel drive\">All-wheel drive</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"d-flex justify-content-center create-catagory-btns\">\r\n                    <button onClick={() => window.location.reload()} type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-danger\">Cancel<i\r\n                        class=\"px-2 fa fa-times\" aria-hidden=\"true\"></i></button>\r\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-success\">Save<i\r\n                        class=\"px-2 fa fa-floppy-o\" aria-hidden=\"true\"></i></button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n"],"sourceRoot":""}