{"version":3,"sources":["screens/Products/edit.js"],"names":["Edit","id","useParams","React","useContext","userContext","user","setLoad","useState","allCategory","setAllCategory","currentCategory","setCurrentCategory","currentProductType","setCurrentProductType","currentUniqueNumber","setCurrentUniqueNumber","name","setName","price","setPrice","useEffect","a","fetch","url","method","headers","token","response","ok","json","data","status","category_list","map","item","value","label","product_detail","product_name","category_id","category_name","type","unique_number","toast","error","message","fetchData","fetchProductData","className","onSubmit","e","preventDefault","formData","FormData","body","window","location","origin","append","submitData","handleSubmit","class","for","options","onChange","target","aria-hidden"],"mappings":"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","file":"static/js/74.da9f76f5.chunk.js","sourcesContent":["\r\nimport React from 'react';\r\nimport { url } from 'src/helpers/helpers';\r\nimport {userContext} from '../../context/UserContext'\r\nimport Select from 'react-select';\r\nimport { toast,ToastContainer } from 'react-toastify';\r\nimport {useParams} from 'react-router-dom';\r\n\r\nexport default function Edit() {\r\n    const {id} = useParams();\r\n    const {user,setLoad} = React.useContext(userContext);\r\n    const [allCategory,setAllCategory] = React.useState([]);\r\n\r\n    const [currentCategory,setCurrentCategory] = React.useState('');\r\n    const [currentProductType,setCurrentProductType] = React.useState('product');\r\n    const [currentUniqueNumber,setCurrentUniqueNumber] = React.useState('');\r\n\r\n    const [name,setName] = React.useState('');\r\n\r\n    const [price,setPrice] = React.useState('');\r\n\r\n    React.useEffect(()=>{\r\n        setLoad(true)\r\n        async function fetchData(){\r\n            const response = await fetch(url + 'categorylist',{\r\n                method : 'GET',\r\n                headers : {\r\n                    'Authorization' : user.token\r\n                }\r\n            })\r\n\r\n            if (response.ok === true){\r\n                const data = await response.json();\r\n\r\n                if (data.status === 200){\r\n                    setLoad(false)\r\n                    setAllCategory(data?.category_list?.map(item=>{\r\n                        return {\r\n                            value : item.id,\r\n                            label : item.name\r\n                        }\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n        fetchData();\r\n        async function fetchProductData(){\r\n            const response = await fetch(url + 'productById/' + id,{\r\n                method : 'GET',\r\n                headers : {\r\n                    'Authorization' : user?.token\r\n                }\r\n            })\r\n\r\n            if (response.ok === true){\r\n                const data = await response.json();\r\n\r\n                if (data.status === 200){\r\n                    setLoad(false)\r\n                    let product_detail = data.product_detail;\r\n                    setName(product_detail.product_name);\r\n                    setPrice(product_detail?.price)\r\n                    setCurrentCategory({\r\n                        value : product_detail.category_id,\r\n                        label : product_detail.category_name\r\n                    })\r\n                    setCurrentProductType(product_detail?.type);\r\n                    setCurrentUniqueNumber(product_detail?.unique_number)\r\n                }else{\r\n                    setLoad(false)\r\n                    toast.error(data.message)\r\n                }\r\n            }\r\n        }\r\n        fetchProductData();\r\n    },[])\r\n\r\n    const handleSubmit = e => {\r\n        setLoad(true)\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append('category_id',currentCategory.value);\r\n        formData.append('category_name',currentCategory.label);\r\n        formData.append('type',currentProductType);\r\n        formData.append('product_name',name);\r\n        formData.append('unique_number',currentUniqueNumber);\r\n        formData.append('price',price)\r\n\r\n\r\n        async function submitData(){\r\n            const response = await fetch(url + 'updateproduct/' + id,{\r\n                method : 'POST',\r\n                headers : {\r\n                    'Authorization' : user?.token\r\n                },\r\n                body : formData\r\n            })\r\n\r\n            if (response.ok === true){\r\n                const data = await response.json();\r\n\r\n                if (data.status === 200){\r\n                    setLoad(false)\r\n                    return window.location = window.location.origin + '/#/products'\r\n                }else{\r\n                    setLoad(false)\r\n                    toast.error(data.message)\r\n                }\r\n            }\r\n        }\r\n\r\n        submitData();\r\n    }\r\n\r\n    return (\r\n        <div className=\"container create-page-main-section\">\r\n            <ToastContainer />\r\n            <form onSubmit={e=>handleSubmit(e)}>\r\n                <div className='p-sm-5 create-form-field'>\r\n                    <div class=\"form-group row\">\r\n                        <label class=\"col-sm-2 col-form-label\" for=\"exampleFormControlSelect1\">Product\r\n                    Catagory:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <Select className=\"form-control\" options={allCategory} value={currentCategory} onChange={setCurrentCategory} />    \r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label class=\"col-sm-2 col-form-label\" for=\"exampleFormControlSelect1\">Type:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <select className=\"form-control\" value={currentProductType} onChange={e=>setCurrentProductType(e.target.value)}>\r\n                                <option value=\"product\">Product</option>\r\n                                <option value=\"service\">Service</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Product Name:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input value={name} onChange={e=>setName(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Product Price:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input value={price} onChange={e=>setPrice(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Unique Number:</label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input value={currentUniqueNumber} onChange={e=>setCurrentUniqueNumber(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div class=\"d-flex justify-content-center create-catagory-btns\">\r\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-danger\">Cancel<i\r\n                        class=\"px-2 fa fa-times\" aria-hidden=\"true\"></i></button>\r\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-success\">Save<i\r\n                        class=\"px-2 fa fa-floppy-o\" aria-hidden=\"true\"></i></button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n"],"sourceRoot":""}