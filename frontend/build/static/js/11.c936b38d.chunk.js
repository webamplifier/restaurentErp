(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[11],{628:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(623),a=(n(1),n(11));function o(e){var t=e.modal,n=e.setModal,o=e.deleteEntry;return Object(a.jsx)("div",{className:"delete_modal_box",children:Object(a.jsxs)(r.eb,{show:t,onClose:n,children:[Object(a.jsx)(r.hb,{closeButton:!0}),Object(a.jsxs)(r.fb,{className:"delete_modal_body",children:[Object(a.jsx)("p",{children:" Are you sure you want to delete this record ?"}),Object(a.jsxs)("div",{className:"btn-div-modal-group delete_modal_Btns",children:[Object(a.jsx)("button",{onClick:function(){return o()},className:"delete_modal_yes_Btn",children:"Yes, Approve"}),Object(a.jsx)("button",{className:"btn btn-primary delete_modal_cancel_Btn",color:"secondary",onClick:function(){return n(!1)},children:"Cancel"})]})]})]})})}},634:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(623),a=(n(1),n(11));function o(e){var t=e.paymodal,n=e.setPayModal,o=e.payBill,s=e.payAmount,c=e.setPayAmount,i=e.paymentMode,u=e.setPaymentMode;return Object(a.jsx)("div",{className:"delete_modal_box",children:Object(a.jsxs)(r.eb,{show:t,onClose:n,children:[Object(a.jsx)(r.hb,{closeButton:!0,children:"Pay Bill"}),Object(a.jsxs)(r.fb,{className:"delete_modal_body",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Paid Amount"}),Object(a.jsx)("input",{type:"text",value:s,onChange:function(e){return c(e.target.value)},className:"form-control"})]})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"",children:"Payment Method"}),Object(a.jsxs)("select",{className:"form-control",value:i,onChange:function(e){return u(e.target.value)},children:[Object(a.jsx)("option",{value:""}),Object(a.jsx)("option",{value:"cash",children:"Cash"}),Object(a.jsx)("option",{value:"bank",children:"Bank"})]})]})})]}),Object(a.jsx)("button",{type:"submit",onClick:function(){return o()},className:"col-12 btn btn-secondary mb-5",children:"Submit"})]})]})})}},752:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n(63),a=n.n(r),o=n(112),s=n(48),c=n(623),i=n(1),u=n.n(i),d=n(163),l=n(113),b=n(626),h=n(83),j=n(628),f=n(634),p=n(11);function m(){var e=u.a.useContext(h.b),t=e.user,n=e.setLoad,r=u.a.useState([]),i=Object(s.a)(r,2),m=i[0],x=i[1],v=u.a.useState(!1),O=Object(s.a)(v,2),k=O[0],y=O[1],w=u.a.useState(!1),_=Object(s.a)(w,2),g=_[0],A=_[1],P=u.a.useState(""),N=Object(s.a)(P,2),C=N[0],S=N[1],z=u.a.useState(""),E=Object(s.a)(z,2),B=E[0],M=E[1],T=u.a.useState(""),F=Object(s.a)(T,2),G=F[0],I=F[1];return u.a.useEffect((function(){function e(){return(e=Object(o.a)(a.a.mark((function e(){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l.d+"fetch-job-card-list",{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(!0!==(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:o=e.sent,n(!1),200===o.status?x(o.job_card_list):b.b.error(o.message);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(!0),function(){e.apply(this,arguments)}()}),[]),Object(p.jsxs)("section",{children:[Object(p.jsx)(b.a,{}),Object(p.jsx)(j.a,{modal:k,setModal:y,deleteEntry:function(){function e(){return(e=Object(o.a)(a.a.mark((function e(){var r,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l.d+"delete/jobcard/"+G,{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:return r=e.sent,e.next=5,r.json();case 5:s=e.sent,n(!1),200===s.status?(c=function(){var e=Object(o.a)(a.a.mark((function e(){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l.d+"fetch-job-card-list",{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(!0!==(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:o=e.sent,n(!1),200===o.status?x(o.job_card_list):b.b.error(o.message);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y(!1),I(""),c()):b.b.error(s.message);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(!0),function(){e.apply(this,arguments)}()}}),Object(p.jsx)(f.a,{paymodal:g,setPayModal:A,payAmount:C,setPayAmount:S,paymentMode:B,payBill:function(){function e(){return(e=Object(o.a)(a.a.mark((function e(){var r,s,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("pay_amount",C),r.append("payment_mode",B),e.next=5,fetch(l.d+"pay/purchase/"+G,{method:"POST",headers:{Authorization:t.token},body:r});case 5:if(1!=(s=e.sent).ok){e.next=11;break}return e.next=9,s.json();case 9:200==(c=e.sent).status?(i=function(){var e=Object(o.a)(a.a.mark((function e(){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l.d+"purchase/report",{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(!0!==(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:o=e.sent,n(!1),200===o.status?x(o.purchase_data):b.b.error(o.message);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A(!1),I(""),i()):b.b.error(c.message);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(!0),function(){e.apply(this,arguments)}()},setPaymentMode:M}),Object(p.jsx)("p",{children:"1 for uncomplete and 2 for complete"}),Object(p.jsx)(c.u,{xs:"12",lg:"12",children:Object(p.jsx)(c.j,{children:Object(p.jsx)(c.k,{children:Object(p.jsx)(c.y,{items:m,fields:["#","client_name","vehicle_name","job_number","status","date","action"],columnFilter:!0,tableFilter:!0,itemsPerPageSelect:!0,itemsPerPage:5,hover:!0,sorter:!0,pagination:!0,scopedSlots:{"#":function(e,t){return Object(p.jsx)("td",{children:t+1})},job_number:function(e){return Object(p.jsx)("td",{children:e.job_card_number})},status:function(e){return Object(p.jsx)("td",{children:1==e.status?"Uncomplete":"Completed"})},date:function(e){return Object(p.jsx)("td",{children:e.job_card_date})},action:function(e){return Object(p.jsxs)("td",{children:[Object(p.jsx)(d.b,{to:"/edit/jobcard/".concat(e.id),children:Object(p.jsx)("i",{class:"fa fa-pencil","aria-hidden":"true"})}),Object(p.jsx)("i",{style:{cursor:"pointer"},onClick:function(){return t=e.id,I(t),void y(!0);var t},class:"fa fa-trash","aria-hidden":"true"}),1==e.status?Object(p.jsx)("i",{style:{cursor:"pointer"},onClick:function(){return function(e){if(!0===window.confirm("Are you sure you want to mark the job card complete. Please check the bill properly before marking it complete.")){var r=function(){var r=Object(o.a)(a.a.mark((function r(){var s,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(l.d+"mark-jobcard-complete/"+e,{headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(!0!==(s=r.sent).ok){r.next=10;break}return r.next=6,s.json();case 6:200==(c=r.sent).status?function(){var e=Object(o.a)(a.a.mark((function e(){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l.d+"fetch-job-card-list",{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(!0!==(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:o=e.sent,n(!1),200===o.status?x(o.job_card_list):b.b.error(o.message);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():b.b.error(c.message),r.next=11;break;case 10:b.b.error("Oops something went wrong!");case 11:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();n(!0),r().catch((function(e){return b.b.error("Internal server error!")}))}}(e.id)},class:"fa fa-arrow-right","aria-hidden":"true"}):Object(p.jsx)("i",{style:{cursor:"pointer"},onClick:function(){return function(e){if(1==window.confirm("Are you sure you want to convert job card into invoice. Please check the payment and all details correctly")){var r=function(){var r=Object(o.a)(a.a.mark((function r(){var s,c,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(l.d+"grab-newinvoice",{headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(1!=(s=r.sent).ok){r.next=10;break}return r.next=6,s.json();case 6:200==(c=r.sent).status?(i=window.prompt("Enter the invocie number",c.newInvoice))&&function(){var r=Object(o.a)(a.a.mark((function r(){var s,c,u;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(s=new FormData).append("invoice",i),r.next=4,fetch(l.d+"submit-invoice/"+e,{method:"POST",headers:{Authorization:null===t||void 0===t?void 0:t.token},body:s});case 4:if(1!=(c=r.sent).ok){r.next=13;break}return r.next=8,c.json();case 8:u=r.sent,n(!1),200==u.status?function(){var e=Object(o.a)(a.a.mark((function e(){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l.d+"fetch-job-card-list",{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(!0!==(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:200===(r=e.sent).status?x(r.job_card_list):b.b.error(r.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():b.b.error(u.message),r.next=14;break;case 13:b.b.error("Oops something went wrong!");case 14:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()().catch((function(e){return b.b.error("Internal server error")})):b.b.error(c.message),r.next=11;break;case 10:b.b.error("Oops something went wrong!");case 11:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();n(!0),r().catch((function(e){return b.b.error("Internal server error.")}))}}(e.id)},class:"fa fa-check","aria-hidden":"true"})]})}}})})})})]})}}}]);
//# sourceMappingURL=11.c936b38d.chunk.js.map