(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[26],{629:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var a=c(114);var s=c(165);function r(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(s.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},630:function(e,t,c){"use strict";t.a=c.p+"static/media/add.b7874215.svg"},734:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return x}));var a=c(629),s=c(63),r=c.n(s),n=c(112),l=c(48),o=c(1),i=c.n(o),u=c(630),d=c(631),j=c(113),b=c(83),m=c(626),h=c(20),p=c(11);function x(){Object(h.g)();var e=i.a.useContext(b.b),t=e.user,c=e.setLoad,s=i.a.useState(""),o=Object(l.a)(s,2),x=o[0],f=o[1],O=i.a.useState(""),v=Object(l.a)(O,2),y=v[0],g=v[1],k=i.a.useState(""),C=Object(l.a)(k,2),S=C[0],N=C[1],w=i.a.useState(""),F=Object(l.a)(w,2),_=(F[0],F[1],i.a.useState("")),q=Object(l.a)(_,2),A=(q[0],q[1],i.a.useState("None")),T=Object(l.a)(A,2),D=T[0],I=T[1],B=i.a.useState(j.a[0]),P=Object(l.a)(B,2),V=P[0],z=P[1],E=i.a.useState(""),J=Object(l.a)(E,2),M=J[0],R=J[1],G=i.a.useState(""),Q=Object(l.a)(G,2),U=Q[0],L=Q[1],H=i.a.useState(0),K=Object(l.a)(H,2),W=K[0],X=K[1],Y=i.a.useState(0),Z=Object(l.a)(Y,2),$=Z[0],ee=Z[1],te=i.a.useState(0),ce=Object(l.a)(te,2),ae=ce[0],se=ce[1],re=i.a.useState("percent"),ne=Object(l.a)(re,2),le=ne[0],oe=ne[1],ie=i.a.useState(0),ue=Object(l.a)(ie,2),de=ue[0],je=ue[1],be=i.a.useState(""),me=Object(l.a)(be,2),he=me[0],pe=me[1],xe=i.a.useState(""),fe=Object(l.a)(xe,2),Oe=fe[0],ve=fe[1],ye=i.a.useState([]),ge=Object(l.a)(ye,2),ke=ge[0],Ce=ge[1],Se=i.a.useState([]),Ne=Object(l.a)(Se,2),we=Ne[0],Fe=Ne[1],_e=i.a.useState([]),qe=Object(l.a)(_e,2),Ae=(qe[0],qe[1],i.a.useState([])),Te=Object(l.a)(Ae,2),De=(Te[0],Te[1],i.a.useState([])),Ie=Object(l.a)(De,2),Be=Ie[0],Pe=Ie[1],Ve=0,ze=0,Ee=0,Je=0,Me=0,Re=i.a.useState("percent"),Ge=Object(l.a)(Re,2),Qe=Ge[0],Ue=Ge[1],Le=i.a.useState(0),He=Object(l.a)(Le,2),Ke=He[0],We=He[1],Xe=i.a.useState(0),Ye=Object(l.a)(Xe,2),Ze=Ye[0],$e=Ye[1],et=i.a.useState("cash"),tt=Object(l.a)(et,2),ct=tt[0],at=tt[1],st=i.a.useState(0),rt=Object(l.a)(st,2),nt=rt[0],lt=rt[1],ot=i.a.useState(0),it=Object(l.a)(ot,2),ut=it[0],dt=it[1],jt=i.a.useState(0),bt=Object(l.a)(jt,2),mt=bt[0],ht=bt[1],pt=i.a.useState(""),xt=Object(l.a)(pt,2),ft=xt[0],Ot=xt[1],vt=0,yt=0,gt=0,kt=0,Ct=0,St=0,Nt=0;i.a.useEffect((function(){function e(){return(e=Object(n.a)(r.a.mark((function e(){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j.d+"partylist",{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(!0!==(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:s=e.sent,c(!1),200===s.status?Fe(null===s||void 0===s?void 0:s.party_list.map((function(e){return{value:e.id,label:e.name}}))):m.b.error(s.message);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(n.a)(r.a.mark((function e(){var a,s,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j.d+"productlist",{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(!0!==(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:s=e.sent,c(!1),200===s.status?Ce(null===s||void 0===s||null===(n=s.product_list)||void 0===n?void 0:n.map((function(e){return{value:e.id,label:e.product_name,type:e.type}}))):m.b.error(s.message);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(!0),function(){e.apply(this,arguments)}(),function(){a.apply(this,arguments)}()}),[]);W>0&&$>0&&V&&(yt=parseFloat(W)*parseFloat($),kt=yt/100*parseFloat(V),vt=gt=yt+kt,"Item"!=D&&"Both"!=D||(Ct=gt,"percent"==le&&(Nt=parseFloat(Ct)/100*parseFloat(de),vt=St=Ct-Nt),"amount"==le&&(Nt=parseFloat(de),vt=St=Ct-Nt)));nt>0&&("Bill"==D||"Both"==D?("percent"==Qe&&(Je=nt/100*parseFloat(Ke),nt,Me=nt-Je),"amount"==Qe&&(Je=parseFloat(Ke),nt,Me=nt-Je),Ve=Me,ze=Math.round(Me),Ee=ze-parseFloat(Ze)):(Ve=nt,ze=Math.round(Ve),Ee=ze-parseFloat(Ze)));return Object(p.jsxs)("div",{className:"container full-size-create-page-main-section",children:[Object(p.jsx)(m.a,{}),Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"p-sm-5 px-md-3 create-form-field create-purchase-page",children:[Object(p.jsxs)("div",{class:"py-4 px-2 form-row create-purchase-header",children:[Object(p.jsxs)("div",{class:"form-group col-md-3",children:[Object(p.jsxs)("label",{for:"invoice-number",children:["Invoice No.",Object(p.jsx)("span",{className:"required-label",children:"*"})]}),Object(p.jsx)("input",{value:x,onChange:function(e){return f(e.target.value)},type:"text",class:"form-control",id:"invoice-number",required:!0})]}),Object(p.jsxs)("div",{class:"form-group col-md-4",children:[Object(p.jsxs)("label",{for:"date",children:["Purchase Date",Object(p.jsx)("span",{className:"required-label",children:"*"})]}),Object(p.jsx)("input",{value:y,onChange:function(e){return g(e.target.value)},type:"date",class:"form-control",id:"date",required:!0})]}),Object(p.jsxs)("div",{class:"form-group col-md-5",children:[Object(p.jsxs)("label",{for:"input-party",children:["Party",Object(p.jsx)("span",{className:"required-label",children:"*"})]}),Object(p.jsx)(d.a,{options:we,value:S,onChange:N})]}),Object(p.jsxs)("div",{class:"form-group my-md-3 col-md-4",children:[Object(p.jsx)("div",{className:"text-center mb-2 font-weight-bold",children:Object(p.jsxs)("label",{for:"input-party",children:["Discount Type",Object(p.jsx)("span",{className:"required-label",children:"*"})]})}),Object(p.jsxs)("div",{className:"row px-3",children:[Object(p.jsxs)("div",{class:"form-check col-sm-3",children:[Object(p.jsx)("input",{checked:"None"==D&&!0,onClick:function(){return I("None")},class:"form-check-input",name:"discount",type:"radio",value:"",id:"defaultCheck1"}),Object(p.jsx)("label",{class:"form-check-label",for:"defaultCheck1",children:"None"})]}),Object(p.jsxs)("div",{class:"form-check col-sm-3",children:[Object(p.jsx)("input",{onClick:function(){return I("Item")},class:"form-check-input",name:"discount",type:"radio",value:"",id:"defaultCheck2"}),Object(p.jsx)("label",{class:"form-check-label",for:"defaultCheck2",children:"Item"})]}),Object(p.jsxs)("div",{class:"form-check col-sm-3",children:[Object(p.jsx)("input",{onClick:function(){return I("Bill")},class:"form-check-input",name:"discount",type:"radio",value:"",id:"defaultCheck3"}),Object(p.jsx)("label",{class:"form-check-label",for:"defaultCheck3",children:"Bill"})]}),Object(p.jsxs)("div",{class:"form-check col-sm-3",children:[Object(p.jsx)("input",{onClick:function(){return I("Both")},class:"form-check-input",name:"discount",type:"radio",value:"",id:"defaultCheck3"}),Object(p.jsx)("label",{class:"form-check-label",for:"defaultCheck3",children:"Both"})]})]})]})]}),Object(p.jsxs)("div",{class:"my-4 form-row",children:[Object(p.jsxs)("div",{class:"form-group col-md-4",children:[Object(p.jsxs)("label",{for:"invoice-number",children:["Item",Object(p.jsx)("span",{className:"required-label",children:"*"})]}),Object(p.jsx)(d.a,{options:ke,value:M,onChange:R})]}),Object(p.jsxs)("div",{class:"form-group col-md-4",children:[Object(p.jsx)("label",{for:"invoice-number",children:"Item Description"}),Object(p.jsx)("textarea",{value:he,onChange:function(e){return pe(e.target.value)},class:"form-control"})]}),Object(p.jsxs)("div",{class:"form-group col-md-4",children:[Object(p.jsxs)("label",{for:"invoice-number",children:["Cost/Unit",Object(p.jsx)("span",{className:"required-label",children:"*"})]}),Object(p.jsx)("input",{value:W,onChange:function(e){return X(e.target.value)},type:"text",class:"form-control",id:""})]}),Object(p.jsxs)("div",{class:"form-group col-md-4",children:[Object(p.jsxs)("label",{for:"invoice-number",children:["Quantity",Object(p.jsx)("span",{className:"required-label",children:"*"})]}),Object(p.jsx)("input",{value:$,onChange:function(e){return ee(e.target.value)},type:"text",class:"form-control",id:""})]}),Object(p.jsxs)("div",{class:"form-group col-md-4",children:[Object(p.jsxs)("label",{for:"invoice-number",children:["Free",Object(p.jsx)("span",{className:"required-label",children:"*"})]}),Object(p.jsx)("input",{value:ae,onChange:function(e){return se(e.target.value)},type:"text",class:"form-control",id:""})]}),Object(p.jsxs)("div",{class:"form-group col-md-4",children:[Object(p.jsxs)("label",{for:"invoice-number",children:["Tax%",Object(p.jsx)("span",{className:"required-label",children:"*"})]}),Object(p.jsx)("select",{className:"form-control",placeholder:"Select tax value",value:V,onChange:function(e){return z(e.target.value)},children:j.a.map((function(e){return Object(p.jsx)("option",{value:e,children:e})}))})]}),"Item"==D&&Object(p.jsxs)("div",{className:"form-group col-md-4",children:[Object(p.jsx)("label",{htmlFor:"",children:"Discount"}),Object(p.jsxs)("div",{className:"m-0 p-0 col-12 row",children:[Object(p.jsx)("div",{className:"px-0 col-5",children:Object(p.jsx)("input",{value:de,onChange:function(e){return je(e.target.value)},class:"form-control",type:"text",name:"",id:""})}),Object(p.jsx)("div",{className:"p-0 col-7",children:Object(p.jsxs)("select",{value:le,onChange:function(e){return oe(e.target.value)},class:"form-control",required:!0,children:[Object(p.jsx)("option",{value:"",children:"Select Type"}),Object(p.jsx)("option",{value:"percent",children:"Percent"}),Object(p.jsx)("option",{value:"amount",children:"Amount"})]})})]})]}),"Both"==D&&Object(p.jsxs)("div",{className:"form-group col-md-4",children:[Object(p.jsx)("label",{htmlFor:"",children:"Discount"}),Object(p.jsxs)("div",{className:"m-0 p-0 col-12 row",children:[Object(p.jsx)("div",{className:"px-0 col-5",children:Object(p.jsx)("input",{value:de,onChange:function(e){return je(e.target.value)},class:"form-control",type:"text",name:"",id:""})}),Object(p.jsx)("div",{className:"p-0 col-7",children:Object(p.jsxs)("select",{value:le,onChange:function(e){return oe(e.target.value)},class:"form-control",required:!0,children:[Object(p.jsx)("option",{value:"",children:"Select Type"}),Object(p.jsx)("option",{value:"percent",children:"Percent"}),Object(p.jsx)("option",{value:"amount",children:"Amount"})]})})]})]}),Object(p.jsxs)("div",{class:"form-group col-md-4 row",children:[Object(p.jsxs)("div",{class:"form-group col-9",children:[Object(p.jsxs)("label",{for:"invoice-number",children:["Total",Object(p.jsx)("span",{className:"required-label",children:"*"})]}),Object(p.jsx)("input",{value:vt,readOnly:!0,type:"text",class:"form-control",id:""})]}),Object(p.jsx)("div",{class:"form-group col-3 p-0 purchase-create-mid-plus-img",children:Object(p.jsx)("img",{className:"img-fluid",onClick:function(){return function(){if(x&&y&&S&&D&&M&&W&&$&&V){var e={item:M,description:he,unit:U,cost_per_unit:W,qty:$,free:ae,tax:V,discount_type:le,discountValue:de,total:vt,amount_before_tax_item:yt,tax_amount_item:kt,amount_after_tax_item:gt,amount_before_discount:Ct,discount_amount:Nt,amount_after_discount:St};if(ft){Ot("");var t=[];Be.map((function(c,a){a==parseInt(ft)-1?t.push(e):t.push(c)}));var c=0,s=0,r=0;t.map((function(e){c=parseFloat(c)+parseFloat(e.tax_amount_item),s=parseFloat(s)+parseFloat(e.total),r=parseFloat(r)+parseFloat(e.discount_amount)})),dt(c),lt(s),ht(r),Pe(t)}else{var n=[].concat(Object(a.a)(Be),[e]),l=0,o=0,i=0;n.map((function(e){l=parseFloat(l)+parseFloat(e.tax_amount_item),o=parseFloat(o)+parseFloat(e.total),i=parseFloat(i)+parseFloat(e.discount_amount)})),dt(l),ht(i),lt(o),lt(parseFloat(nt)+parseFloat(vt)),Pe(n)}R(""),X(0),L(""),X(0),ee(0),se(0),z(""),oe(""),je(0),pe(""),vt=0,yt=0,gt=0,kt=0,Ct=0,St=0,Nt=0}else m.b.error("Fill all fields having *")}()},style:{cursor:"pointer"},src:u.a,alt:""})})]})]}),Be.length>0&&Object(p.jsx)("div",{className:"my-table-responsive",children:Object(p.jsxs)("table",{class:"table mt-4",children:[Object(p.jsx)("thead",{class:"thead-dark",children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"Items"}),Object(p.jsx)("th",{scope:"col",children:"Description"}),Object(p.jsx)("th",{scope:"col",children:"Cost/Unit"}),Object(p.jsx)("th",{scope:"col",children:"Quantity"}),Object(p.jsx)("th",{scope:"col",children:"Free"}),Object(p.jsx)("th",{scope:"col",children:"Tax%"}),Object(p.jsx)("th",{children:"Discount"}),Object(p.jsx)("th",{scope:"col",children:"Total"}),Object(p.jsx)("th",{children:"Actions"})]})}),Object(p.jsx)("tbody",{className:"table-borderless",children:Be.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e.item.label}),Object(p.jsx)("td",{children:e.description}),Object(p.jsx)("td",{children:e.cost_per_unit}),Object(p.jsx)("td",{children:e.qty}),Object(p.jsx)("td",{children:e.free}),Object(p.jsx)("td",{children:e.tax}),Object(p.jsxs)("td",{children:[e.discountValue," ",e.discount_type]}),Object(p.jsx)("td",{children:e.total}),Object(p.jsxs)("td",{children:[Object(p.jsx)("i",{style:{cursor:"pointer"},onClick:function(){return function(e,t){Ot(t),R(e.item),pe(e.description),X(e.cost_per_unit),ee(e.qty),se(e.free),z(e.tax),oe(e.discount_type),je(e.discountValue),vt=e.total}(e,t+1)},class:"fa fa-pencil","aria-hidden":"true"}),Object(p.jsx)("i",{onClick:function(){return function(e){var t=[];Be.map((function(c,a){a!=e&&t.push(c)})),Pe(t)}(t)},style:{cursor:"pointer"},class:"fa fa-trash","aria-hidden":"true"})]})]})}))})]})}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:["taxabale amount:- ",ut&&ut]}),Object(p.jsxs)("div",{children:["discount amount:- ",mt&&mt]})]}),Object(p.jsxs)("div",{className:"row mt-5 justify-content-between purchase-create-footer",children:[Object(p.jsxs)("div",{class:"form-group col-md-5",children:[Object(p.jsx)("label",{for:"exampleFormControlTextarea1",children:"Remarks"}),Object(p.jsx)("textarea",{value:Oe,onChange:function(e){return ve(e.target.value)},class:"form-control",id:"exampleFormControlTextarea1",rows:"5"})]}),Object(p.jsxs)("div",{className:"col-md-6",children:[Object(p.jsxs)("div",{class:"form-group row",children:[Object(p.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Total Value"}),Object(p.jsx)("div",{class:"col-md-8",children:Object(p.jsx)("input",{type:"text",value:nt,readOnly:!0,class:"form-control",id:""})})]}),"Bill"==D&&Object(p.jsxs)("div",{class:"form-group row",children:[Object(p.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Discount"}),Object(p.jsxs)("div",{class:"pr-0 col-md-8 row",children:[Object(p.jsx)("div",{className:"pr-0 col-5",children:Object(p.jsx)("input",{class:"form-control",value:Ke,onChange:function(e){return We(e.target.value)},type:"text",name:"",id:""})}),Object(p.jsx)("div",{className:"px-0 col-7",children:Object(p.jsxs)("select",{value:Qe,onChange:function(e){return Ue(e.target.value)},class:"form-control",required:!0,children:[Object(p.jsx)("option",{value:"",children:"Select Type"}),Object(p.jsx)("option",{value:"percent",children:"Percent"}),Object(p.jsx)("option",{value:"amount",children:"Amount"})]})})]})]}),"Both"==D&&Object(p.jsxs)("div",{class:"form-group row",children:[Object(p.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Discount"}),Object(p.jsxs)("div",{class:"pr-0 col-md-8 row",children:[Object(p.jsx)("div",{className:"pr-0 col-5",children:Object(p.jsx)("input",{class:"form-control",type:"text",value:Ke,onChange:function(e){return We(e.target.value)}})}),Object(p.jsx)("div",{className:"px-0 col-7",children:Object(p.jsxs)("select",{value:Qe,onChange:function(e){return Ue(e.target.value)},class:"form-control",required:!0,children:[Object(p.jsx)("option",{value:"",children:"Select Type"}),Object(p.jsx)("option",{value:"percent",children:"Percent"}),Object(p.jsx)("option",{value:"amount",children:"Amount"})]})})]})]}),Object(p.jsxs)("div",{class:"form-group row",children:[Object(p.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Final Amount"}),Object(p.jsx)("div",{class:"col-md-8",children:Object(p.jsx)("input",{readOnly:!0,value:Ve,type:"text",class:"form-control",id:""})})]}),Object(p.jsxs)("div",{class:"form-group row",children:[Object(p.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Round Off Total"}),Object(p.jsx)("div",{class:"col-md-8",children:Object(p.jsx)("input",{readOnly:!0,value:ze,type:"text",class:"form-control",id:""})})]}),Object(p.jsxs)("div",{class:"form-group row",children:[Object(p.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Paid Amount"}),Object(p.jsx)("div",{class:"col-md-8",children:Object(p.jsx)("input",{value:Ze,onChange:function(e){return $e(e.target.value)},type:"text",class:"form-control",id:""})})]}),Ze>0&&Object(p.jsxs)("div",{class:"form-group row",children:[Object(p.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Payment Method"}),Object(p.jsx)("div",{class:"col-md-8",children:Object(p.jsxs)("select",{value:ct,onChange:function(e){return at(e.target.value)},id:"input-party",class:"form-control",required:!0,children:[Object(p.jsx)("option",{value:"",children:"Select payment mode"}),Object(p.jsx)("option",{value:"cash",children:"Cash"}),Object(p.jsx)("option",{value:"bank",children:"Bank"})]})})]}),Object(p.jsxs)("div",{class:"form-group row",children:[Object(p.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Remain Amount"}),Object(p.jsx)("div",{class:"col-md-8",children:Object(p.jsx)("input",{type:"text",value:Ee,readOnly:!0,class:"form-control",id:""})})]})]})]})]}),Object(p.jsxs)("div",{class:"d-flex justify-content-center create-catagory-btns",children:[Object(p.jsxs)("button",{type:"button",onClick:function(){return window.location.reload()},class:"font-weight-bold m-3 py-2 px-4 btn btn-danger",children:["Cancel",Object(p.jsx)("i",{class:"px-2 fa fa-times","aria-hidden":"true"})]}),Object(p.jsxs)("button",{type:"button",onClick:function(){return function(){if(x&&y&&S&&Be.length>0&&nt){var e=function(){var e=Object(n.a)(r.a.mark((function e(){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j.d+"create/purchase",{method:"POST",headers:{Authorization:t.token},body:o});case 2:if(1!=(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:s=e.sent,c(!1),200==s.status?window.location.reload():m.b.error(s.message);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c(!0);var a={invoiceNo:x,purchaseDate:y,currentParty:S,discountType:D},s={totalValue:nt,finalAmount:Ve,roundOffTotal:ze,paidAmount:Ze,remainAmount:Ee,finalDiscountValue:Ke,finalDiscountCriteria:Qe,remarks:Oe,paymentMethod:ct,taxableAmount:ut,discountAmount:mt},l=[];l.push(a),l.push(s);var o=new FormData;o.append("final_array",JSON.stringify(l)),o.append("allItems",JSON.stringify(Be)),e()}else m.b.error("Please fill the data with *")}()},class:"font-weight-bold m-3 py-2 px-4 btn btn-success",children:["Save",Object(p.jsx)("i",{class:"px-2 fa fa-floppy-o","aria-hidden":"true"})]})]})]})]})}}}]);
//# sourceMappingURL=26.6901751a.chunk.js.map