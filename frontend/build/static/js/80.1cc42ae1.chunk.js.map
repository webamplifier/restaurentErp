{"version":3,"sources":["screens/Users/Edit.js"],"names":["Edit","id","useParams","React","useContext","userContext","user","setLoad","useState","allRoles","setAllRoles","currentRole","setCurrentRole","name","setName","email","setEmail","password","setPassword","useEffect","a","fetch","url","method","headers","token","response","ok","json","data","status","roles_list","toast","error","message","user_detail","username","role_id","fetchData","catch","err","fetchDetail","className","onSubmit","e","preventDefault","formData","FormData","body","window","location","origin","append","submitData","handleSubmit","class","for","type","value","onChange","target","map","item","index","aria-hidden"],"mappings":"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","file":"static/js/80.1cc42ae1.chunk.js","sourcesContent":["import React from 'react'\r\nimport { url } from 'src/helpers/helpers';\r\nimport {userContext} from '../../context/UserContext'\r\nimport {useParams} from 'react-router-dom';\r\nimport { toast,ToastContainer } from 'react-toastify';\r\n\r\nexport default function Edit() {\r\n    const {id} = useParams();\r\n    const {user,setLoad} = React.useContext(userContext);\r\n    const [allRoles,setAllRoles] = React.useState([]);\r\n\r\n    const [currentRole,setCurrentRole] = React.useState('');\r\n    const [name,setName] = React.useState('');\r\n    const [email,setEmail] = React.useState('');\r\n\r\n    const [password,setPassword] = React.useState('');\r\n    \r\n    React.useEffect(()=>{\r\n        setLoad(true)\r\n        async function fetchData(){\r\n            const response = await fetch(url + 'rolelist',{\r\n                method : 'GET',\r\n                headers : {\r\n                    'Authorization' : user.token\r\n                }\r\n            })\r\n\r\n            if (response.ok === true){\r\n                const data = await response.json();\r\n                setLoad(false)\r\n                if (data.status === 200){\r\n                    setAllRoles(data?.roles_list);\r\n                }else{\r\n                    toast.error(data.message);\r\n                }\r\n            }else{\r\n                toast.error('Oops something went wrong!')\r\n            }\r\n        }\r\n        fetchData().catch(err=>toast.error('Internal server error!'));\r\n\r\n        async function fetchDetail(){\r\n            setLoad(true)\r\n            const response = await fetch(url + 'userById/' + id,{\r\n                headers : {\r\n                    'Authorization' : user?.token\r\n                }\r\n            });\r\n\r\n            if (response.ok === true){\r\n                const data = await response.json();\r\n                setLoad(false)\r\n                if (data.status == 200){\r\n                    let user_detail = data?.user_detail;\r\n                    setName(user_detail?.username);\r\n                    setEmail(user_detail?.email);\r\n                    setCurrentRole(user_detail?.role_id)\r\n                }else{\r\n                    toast.error(data.message)\r\n                }\r\n            }else{\r\n                toast.error('Oops something went wrong!');\r\n            }\r\n        }\r\n        fetchDetail().catch(err=>toast.error('Internal server error'))\r\n    },[])\r\n\r\n    const handleSubmit = e => {\r\n        setLoad(true)\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append('name',name);\r\n        formData.append('email',email);\r\n        formData.append('password',password);\r\n        formData.append('role_id',currentRole)\r\n\r\n        async function submitData(){\r\n            const response = await fetch(url + 'updateuser/' + id,{\r\n                method : 'POST',\r\n                headers : {\r\n                    'Authorization' : user?.token\r\n                },\r\n                body : formData\r\n            })\r\n\r\n            if (response.ok === true){\r\n                const data = await response.json();\r\n                setLoad(false)\r\n                if (data.status === 200){\r\n                    return window.location = window.location.origin + '/#/userList'\r\n                }else{\r\n                    toast.error(data.message)\r\n                }\r\n            }\r\n        }\r\n\r\n        submitData();\r\n    }\r\n\r\n    return (\r\n        <div className=\"container create-page-main-section\">\r\n            <ToastContainer />\r\n            <form onSubmit={e=>handleSubmit(e)}>\r\n                <div className='p-sm-5 create-form-field'>\r\n                    <div class=\"form-group row\">\r\n                        <label class=\"col-sm-2 col-form-label\" for=\"exampleFormControlSelect1\">Username:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input type=\"text\" value={name} onChange={e=>setName(e.target.value)} className=\"form-control\" />    \r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label class=\"col-sm-2 col-form-label\" for=\"exampleFormControlSelect1\">Email:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input type=\"email\" value={email} onChange={e=>setEmail(e.target.value)} className=\"form-control\" />    \r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label class=\"col-sm-2 col-form-label\" for=\"exampleFormControlSelect1\">Role:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <select className='form-control' value={currentRole} onChange={e=>setCurrentRole(e.target.value)}>\r\n                                <option value=\"\">Select Roles</option>\r\n                                {allRoles.map((item,index)=>(\r\n                                    <option key={index} value={item.id}>{item.name}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Password:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input value={password} onChange={e=>setPassword(e.target.value)} type=\"password\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div class=\"d-flex justify-content-center create-catagory-btns\">\r\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-danger\">Cancel<i\r\n                        class=\"px-2 fa fa-times\" aria-hidden=\"true\"></i></button>\r\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-success\">Save<i\r\n                        class=\"px-2 fa fa-floppy-o\" aria-hidden=\"true\"></i></button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\n"],"sourceRoot":""}