{"version":3,"sources":["components/CustomModal.js","components/PayModal.js","screens/Reports/FinalSalesReport.js"],"names":["CustomModal","props","modal","setModal","deleteEntry","className","show","onClose","closeButton","onClick","color","PayModal","paymodal","setPayModal","payBill","payAmount","setPayAmount","paymentMode","setPaymentMode","htmlFor","type","value","onChange","e","target","FinalSalesReport","React","useContext","userContext","user","setLoad","useState","purchaseList","setPurchaseList","id","setId","useEffect","a","fetch","url","method","headers","token","response","ok","json","data","status","invoice_list","toast","error","message","fetchData","deleteData","formData","FormData","append","body","payBillServer","xs","lg","items","fields","columnFilter","tableFilter","itemsPerPageSelect","itemsPerPage","hover","sorter","pagination","scopedSlots","item","index","total_after_roundoff","amount_paid","invoice_payment_status","job_card_date","role_id","to","class","aria-hidden","style","cursor","payModal","href","node_url"],"mappings":"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","file":"static/js/10.1b33d8dc.chunk.js","sourcesContent":["import { CButton, CModal, CModalBody, CModalFooter, CModalHeader } from '@coreui/react'\r\nimport React from 'react'\r\n\r\n\r\nexport default function CustomModal(props) {\r\n    const { modal, setModal, deleteEntry } = props;\r\n\r\n    return (\r\n        <div className='delete_modal_box'>\r\n            <CModal\r\n                show={modal}\r\n                onClose={setModal}\r\n            >\r\n                <CModalHeader closeButton>\r\n                </CModalHeader>\r\n                <CModalBody className='delete_modal_body'>\r\n                    <p> Are you sure you want to delete this record ?</p>\r\n                    <div className='btn-div-modal-group delete_modal_Btns'>\r\n                        <button onClick={() => deleteEntry()} className='delete_modal_yes_Btn'>Yes, Approve</button>\r\n                        <button className='btn btn-primary delete_modal_cancel_Btn' color=\"secondary\" onClick={() => setModal(false)}>Cancel</button>\r\n                    </div>\r\n                </CModalBody>\r\n            </CModal>\r\n        </div>\r\n    )\r\n}\r\n","import { CButton, CModal, CModalBody, CModalFooter, CModalHeader } from '@coreui/react'\r\nimport React from 'react'\r\n\r\n\r\nexport default function PayModal(props) {\r\n    const { paymodal, setPayModal, payBill, payAmount, setPayAmount, paymentMode, setPaymentMode } = props;\r\n\r\n    return (\r\n        <div className='delete_modal_box'>\r\n            <CModal\r\n                show={paymodal}\r\n                onClose={setPayModal}\r\n            >\r\n                <CModalHeader closeButton>\r\n                    Pay Bill\r\n                </CModalHeader>\r\n                <CModalBody className='delete_modal_body'>\r\n                    <div className=\"row\">\r\n\r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">Paid Amount</label>\r\n                                <input type=\"text\" value={payAmount} onChange={e => setPayAmount(e.target.value)} className='form-control' />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"\">Payment Method</label>\r\n                                <select className='form-control' value={paymentMode} onChange={e => setPaymentMode(e.target.value)}>\r\n                                    <option value=\"\"></option>\r\n                                    <option value=\"cash\">Cash</option>\r\n                                    <option value=\"bank\">Bank</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <button type='submit' onClick={()=>payBill()} className='col-12 btn btn-secondary mb-5'>Submit</button>\r\n                </CModalBody>\r\n            </CModal>\r\n        </div>\r\n    )\r\n}\r\n","import { CBadge, CCard, CCardBody, CCol, CDataTable } from '@coreui/react';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { node_url, url } from 'src/helpers/helpers';\r\nimport { toast, ToastContainer } from 'react-toastify'\r\nimport { userContext } from '../../context/UserContext'\r\nimport CustomModal from '../../components/CustomModal';\r\nimport PayModal from '../../components/PayModal';\r\n\r\nconst getBadge = status => {\r\n    switch (status) {\r\n        case 2: return 'success'\r\n        // case 2: return 'secondary'\r\n        case 1: return 'dark'\r\n        // case 'Banned': return 'danger'\r\n        default: return 'primary'\r\n    }\r\n}\r\n\r\nexport default function FinalSalesReport() {\r\n    const { user,setLoad } = React.useContext(userContext);\r\n    const fields = ['#', 'invoice_number', 'invoice_date', 'client_name', 'vehicle_name', 'bill_amount', 'paid_amount', 'remain_amount', 'status', 'action'];\r\n    const [purchaseList, setPurchaseList] = React.useState([]);\r\n    const [modal, setModal] = React.useState(false);\r\n    const [paymodal, setPayModal] = React.useState(false);\r\n    const [payAmount, setPayAmount] = React.useState(0);\r\n    const [paymentMode, setPaymentMode] = React.useState('')\r\n    const [id, setId] = React.useState('')\r\n\r\n    const payBill = () => {\r\n        setLoad(true)\r\n        async function payBillServer() {\r\n            const formData = new FormData();\r\n            formData.append('pay_amount', payAmount);\r\n            formData.append('payment_mode', paymentMode);\r\n            const response = await fetch(url + 'pay/invoice/' + id, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': user.token\r\n                },\r\n                body: formData\r\n            })\r\n\r\n            if (response.ok == true) {\r\n                const data = await response.json();\r\n                \r\n                if (data.status == 200) {\r\n                    setPayModal(false);\r\n                    setId('');\r\n                    async function fetchData() {\r\n                        const response = await fetch(url + 'fetch-invoicebill-list', {\r\n                            method: 'GET',\r\n                            headers: {\r\n                                'Authorization': user?.token\r\n                            }\r\n                        })\r\n            \r\n                        if (response.ok === true) {\r\n                            const data = await response.json();\r\n                            setLoad(false)\r\n                            if (data.status === 200) {\r\n                                setPurchaseList(data.invoice_list);\r\n                            } else {\r\n                                toast.error(data.message);\r\n                            }\r\n                        }\r\n                    }\r\n            \r\n                    fetchData();\r\n                } else {\r\n                    toast.error(data.message);\r\n                }\r\n            }\r\n        }\r\n        payBillServer();\r\n    }\r\n\r\n    const payModal = (item, id) => {\r\n        setPayModal(true);\r\n        setId(id);\r\n    }\r\n\r\n    const deleteEntry = () => {\r\n        setLoad(true)\r\n        async function deleteData() {\r\n            const response = await fetch(url + 'delete/jobcard/' + id, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Authorization': user?.token\r\n                }\r\n            })\r\n\r\n            const data = await response.json();\r\n            setLoad(false)\r\n            if (data.status === 200) {\r\n                setModal(false);\r\n                setId('');\r\n                async function fetchData() {\r\n                    const response = await fetch(url + 'fetch-invoicebill-list', {\r\n                        method: 'GET',\r\n                        headers: {\r\n                            'Authorization': user?.token\r\n                        }\r\n                    })\r\n        \r\n                    if (response.ok === true) {\r\n                        const data = await response.json();\r\n                        setLoad(false)\r\n                        if (data.status === 200) {\r\n                            setPurchaseList(data.invoice_list);\r\n                        } else {\r\n                            toast.error(data.message);\r\n                        }\r\n                    }\r\n                }\r\n        \r\n                fetchData();\r\n            } else {\r\n                toast.error(data.message)\r\n            }\r\n        }\r\n        deleteData();\r\n    }\r\n\r\n    const showModal = value => {\r\n        setId(value);\r\n        setModal(true)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setLoad(true)\r\n        async function fetchData() {\r\n            const response = await fetch(url + 'fetch-invoicebill-list', {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Authorization': user?.token\r\n                }\r\n            })\r\n\r\n            if (response.ok === true) {\r\n                const data = await response.json();\r\n                setLoad(false)\r\n                if (data.status === 200) {\r\n                    setPurchaseList(data.invoice_list);\r\n                } else {\r\n                    toast.error(data.message);\r\n                }\r\n            }\r\n        }\r\n\r\n        fetchData();\r\n    }, [])\r\n\r\n    return (\r\n        <section>\r\n            <ToastContainer />\r\n            <CustomModal modal={modal} setModal={setModal} deleteEntry={deleteEntry} />\r\n            <PayModal paymodal={paymodal} setPayModal={setPayModal} payAmount={payAmount} setPayAmount={setPayAmount} paymentMode={paymentMode} payBill={payBill} setPaymentMode={setPaymentMode} />\r\n            <CCol xs=\"12\" lg=\"12\">\r\n                <CCard>\r\n                    <CCardBody>\r\n                        <CDataTable\r\n                            items={purchaseList}\r\n                            fields={fields}\r\n                            columnFilter\r\n                            tableFilter\r\n                            itemsPerPageSelect\r\n                            itemsPerPage={5}\r\n                            hover\r\n                            sorter\r\n                            pagination\r\n                            scopedSlots={{\r\n                                '#': (item, index) => (\r\n                                    <td>\r\n                                        {index + 1}\r\n                                    </td>\r\n                                ),\r\n                                'bill_amount' : (item) => (\r\n                                    <td>\r\n                                        {item.total_after_roundoff}\r\n                                    </td>\r\n                                ),\r\n                                'paid_amount': (item) => (\r\n                                    <td>\r\n                                        {item.amount_paid}\r\n                                    </td>\r\n                                ),\r\n                                'status':\r\n                                    (item) => (\r\n                                        <td>\r\n\r\n                                            {item.invoice_payment_status == 0 ? 'unpaid' : 'paid'}\r\n\r\n                                        </td>\r\n                                    ),\r\n                                'date': (item) => (\r\n                                    <td>\r\n                                        {item.job_card_date}\r\n                                    </td>\r\n                                ),\r\n                                'action': (item) => (\r\n                                    <td>\r\n                                        {user?.role_id == 1 && (\r\n                                            <>\r\n                                                <Link to={`/edit/jobcard/${item.id}`}><i class=\"fa fa-pencil\" aria-hidden=\"true\"></i></Link>\r\n                                                <i style={{ cursor: \"pointer\" }} onClick={() => showModal(item.id)} class=\"fa fa-trash\" aria-hidden=\"true\"></i>\r\n                                            </>\r\n                                        )}\r\n\r\n                                        {item.invoice_payment_status == 0 && <i style={{cursor:'pointer'}} onClick={()=>payModal(item.id,item.id)} class=\"fa fa-usd\" aria-hidden=\"true\"></i>}\r\n                                        <a target=\"_blank\" href={`${node_url}print-sales/${item.id}`} ><i class=\"fa fa-print\" aria-hidden=\"true\"></i></a>\r\n                                    </td>\r\n                                )\r\n\r\n                            }\r\n                            }\r\n                        />\r\n                    </CCardBody>\r\n                </CCard>\r\n            </CCol>\r\n        </section>\r\n    )\r\n}\r\n"],"sourceRoot":""}