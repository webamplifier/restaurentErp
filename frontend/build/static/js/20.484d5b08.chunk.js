(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[20],{629:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(114);var c=a(165);function s(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},630:function(e,t,a){"use strict";t.a=a.p+"static/media/add.b7874215.svg"},757:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var r=a(629),c=a(63),s=a.n(c),n=a(112),o=a(48),l=a(1),i=a.n(l),u=a(630),d=a(113),j=a(83),b=a(626),p=a(20),f=a(11);function m(){Object(p.g)();var e=i.a.useContext(j.b),t=e.user,a=e.setLoad,c=i.a.useState(""),l=Object(o.a)(c,2),m=l[0],h=(l[1],i.a.useState("")),O=Object(o.a)(h,2),x=O[0],v=O[1],y=i.a.useState(""),g=Object(o.a)(y,2),S=g[0],w=g[1],k=i.a.useState(""),F=Object(o.a)(k,2),C=(F[0],F[1],i.a.useState("")),N=Object(o.a)(C,2),_=(N[0],N[1],i.a.useState("None")),T=Object(o.a)(_,2),A=T[0],q=(T[1],i.a.useState(d.a[0])),D=Object(o.a)(q,2),I=(D[0],D[1]),z=i.a.useState(""),E=Object(o.a)(z,2),J=E[0],P=E[1],V=i.a.useState(""),G=Object(o.a)(V,2),M=(G[0],G[1]),Q=i.a.useState(0),R=Object(o.a)(Q,2),U=R[0],L=R[1],B=i.a.useState(0),H=Object(o.a)(B,2),K=H[0],W=H[1],X=i.a.useState(0),Y=Object(o.a)(X,2),Z=(Y[0],Y[1]),$=i.a.useState("percent"),ee=Object(o.a)($,2),te=(ee[0],ee[1]),ae=i.a.useState(0),re=Object(o.a)(ae,2),ce=(re[0],re[1]),se=i.a.useState(""),ne=Object(o.a)(se,2),oe=ne[0],le=ne[1],ie=i.a.useState(""),ue=Object(o.a)(ie,2),de=ue[0],je=ue[1],be=i.a.useState([]),pe=Object(o.a)(be,2),fe=(pe[0],pe[1]),me=i.a.useState([]),he=Object(o.a)(me,2),Oe=(he[0],he[1]),xe=i.a.useState([]),ve=Object(o.a)(xe,2),ye=(ve[0],ve[1],i.a.useState([])),ge=Object(o.a)(ye,2),Se=(ge[0],ge[1],i.a.useState([])),we=Object(o.a)(Se,2),ke=we[0],Fe=we[1],Ce=0,Ne=i.a.useState("percent"),_e=Object(o.a)(Ne,2),Te=_e[0],Ae=(_e[1],i.a.useState(0)),qe=Object(o.a)(Ae,2),De=qe[0],Ie=(qe[1],i.a.useState(0)),ze=Object(o.a)(Ie,2),Ee=ze[0],Je=(ze[1],i.a.useState("cash")),Pe=Object(o.a)(Je,2),Ve=Pe[0],Ge=(Pe[1],i.a.useState(0)),Me=Object(o.a)(Ge,2),Qe=Me[0],Re=Me[1],Ue=i.a.useState(0),Le=Object(o.a)(Ue,2),Be=Le[0],He=Le[1],Ke=i.a.useState(0),We=Object(o.a)(Ke,2),Xe=We[0],Ye=We[1],Ze=i.a.useState(""),$e=Object(o.a)(Ze,2),et=$e[0],tt=$e[1],at=0;i.a.useEffect((function(){function e(){return(e=Object(n.a)(s.a.mark((function e(){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d.d+"partylist",{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 2:if(!0!==(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:c=e.sent,a(!1),200===c.status?Oe(null===c||void 0===c?void 0:c.party_list.map((function(e){return{value:e.id,label:e.name}}))):b.b.error(c.message);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=Object(n.a)(s.a.mark((function e(){var r,c,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,fetch(d.d+"productlist",{method:"GET",headers:{Authorization:null===t||void 0===t?void 0:t.token}});case 3:if(!0!==(r=e.sent).ok){e.next=10;break}return e.next=7,r.json();case 7:c=e.sent,a(!1),200===c.status?fe(null===c||void 0===c||null===(n=c.product_list)||void 0===n?void 0:n.map((function(e){return{value:e.id,label:e.product_name,type:e.type}}))):b.b.error(c.message);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(!0),function(){e.apply(this,arguments)}(),function(){r.apply(this,arguments)}()}),[]);U>0&&K>0&&(at=parseFloat(U)*parseFloat(K));Qe>0&&(Ce=Math.round(Qe));return Object(f.jsxs)("div",{className:"container full-size-create-page-main-section",children:[Object(f.jsx)(b.a,{}),Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{className:"p-sm-5 px-md-3 create-form-field create-purchase-page",children:[Object(f.jsxs)("div",{class:"py-4 px-2 form-row create-purchase-header",children:[Object(f.jsxs)("div",{class:"form-group col-md-4",children:[Object(f.jsxs)("label",{for:"date",children:["Date",Object(f.jsx)("span",{className:"required-label",children:"*"})]}),Object(f.jsx)("input",{value:x,onChange:function(e){return v(e.target.value)},type:"date",class:"form-control",id:"date",required:!0})]}),Object(f.jsxs)("div",{class:"form-group col-md-5",children:[Object(f.jsxs)("label",{for:"input-party",children:["To",Object(f.jsx)("span",{className:"required-label",children:"*"})]}),Object(f.jsx)("input",{className:"form-control",value:S,onChange:function(e){return w(e.target.value)}})]})]}),Object(f.jsxs)("div",{class:"my-4 form-row",children:[Object(f.jsxs)("div",{class:"form-group col-md-4",children:[Object(f.jsxs)("label",{for:"invoice-number",children:["Item",Object(f.jsx)("span",{className:"required-label",children:"*"})]}),Object(f.jsx)("input",{value:J,onChange:function(e){return P(e.target.value)},className:"form-control"})]}),Object(f.jsxs)("div",{class:"form-group col-md-4",children:[Object(f.jsx)("label",{for:"invoice-number",children:"Item Description"}),Object(f.jsx)("textarea",{value:oe,onChange:function(e){return le(e.target.value)},class:"form-control"})]}),Object(f.jsxs)("div",{class:"form-group col-md-4",children:[Object(f.jsxs)("label",{for:"invoice-number",children:["Cost/Unit",Object(f.jsx)("span",{className:"required-label",children:"*"})]}),Object(f.jsx)("input",{value:U,onChange:function(e){return L(e.target.value)},type:"text",class:"form-control",id:""})]}),Object(f.jsxs)("div",{class:"form-group col-md-4",children:[Object(f.jsxs)("label",{for:"invoice-number",children:["Quantity",Object(f.jsx)("span",{className:"required-label",children:"*"})]}),Object(f.jsx)("input",{value:K,onChange:function(e){return W(e.target.value)},type:"text",class:"form-control",id:""})]}),Object(f.jsxs)("div",{class:"form-group col-md-4 row",children:[Object(f.jsxs)("div",{class:"form-group col-9",children:[Object(f.jsxs)("label",{for:"invoice-number",children:["Total",Object(f.jsx)("span",{className:"required-label",children:"*"})]}),Object(f.jsx)("input",{value:at,readOnly:!0,type:"text",class:"form-control",id:""})]}),Object(f.jsx)("div",{class:"form-group col-3 p-0 purchase-create-mid-plus-img",children:Object(f.jsx)("img",{className:"img-fluid",onClick:function(){return function(){if(x&&S&&J&&U&&K){var e={item:J,description:oe,cost_per_unit:U,qty:K,total:at};if(et){tt("");var t=[];ke.map((function(a,r){r==parseInt(et)-1?t.push(e):t.push(a)}));var a=0,c=0,s=0;t.map((function(e){a=parseFloat(a)+parseFloat(e.tax_amount_item),c=parseFloat(c)+parseFloat(e.total),s=parseFloat(s)+parseFloat(e.discount_amount)})),He(a),Re(c),Ye(s),Fe(t)}else{var n=[].concat(Object(r.a)(ke),[e]),o=0,l=0,i=0;n.map((function(e){o=parseFloat(o)+parseFloat(e.tax_amount_item),l=parseFloat(l)+parseFloat(e.total),i=parseFloat(i)+parseFloat(e.discount_amount)})),He(o),Ye(i),Re(l),Re(parseFloat(Qe)+parseFloat(at)),Fe(n)}P(""),L(0),M(""),L(0),W(0),Z(0),I(""),te(""),ce(0),le(""),at=0,0,0,0,0,0,0}else b.b.error("Fill all fields having *")}()},style:{cursor:"pointer"},src:u.a,alt:""})})]})]}),ke.length>0&&Object(f.jsx)("div",{className:"my-table-responsive",children:Object(f.jsxs)("table",{class:"table mt-4",children:[Object(f.jsx)("thead",{class:"thead-dark",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{scope:"col",children:"Items"}),Object(f.jsx)("th",{scope:"col",children:"Description"}),Object(f.jsx)("th",{scope:"col",children:"Cost/Unit"}),Object(f.jsx)("th",{scope:"col",children:"Quantity"}),Object(f.jsx)("th",{scope:"col",children:"Total"}),Object(f.jsx)("th",{children:"Actions"})]})}),Object(f.jsx)("tbody",{className:"table-borderless",children:ke.map((function(e,t){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.item}),Object(f.jsx)("td",{children:e.description}),Object(f.jsx)("td",{children:e.cost_per_unit}),Object(f.jsx)("td",{children:e.qty}),Object(f.jsx)("td",{children:e.total}),Object(f.jsxs)("td",{children:[Object(f.jsx)("i",{style:{cursor:"pointer"},onClick:function(){return function(e,t){tt(t),P(e.item),le(e.description),L(e.cost_per_unit),W(e.qty),at=e.total}(e,t+1)},class:"fa fa-pencil","aria-hidden":"true"}),Object(f.jsx)("i",{onClick:function(){return function(e){var t=[];ke.map((function(a,r){r!=e&&t.push(a)})),Fe(t)}(t)},style:{cursor:"pointer"},class:"fa fa-trash","aria-hidden":"true"})]})]})}))})]})}),Object(f.jsxs)("div",{className:"row mt-5 justify-content-between purchase-create-footer",children:[Object(f.jsxs)("div",{class:"form-group col-md-5",children:[Object(f.jsx)("label",{for:"exampleFormControlTextarea1",children:"Remarks"}),Object(f.jsx)("textarea",{value:de,onChange:function(e){return je(e.target.value)},class:"form-control",id:"exampleFormControlTextarea1",rows:"5"})]}),Object(f.jsxs)("div",{className:"col-md-6",children:[Object(f.jsxs)("div",{class:"form-group row",children:[Object(f.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Total Value"}),Object(f.jsx)("div",{class:"col-md-8",children:Object(f.jsx)("input",{type:"text",value:Qe,readOnly:!0,class:"form-control",id:""})})]}),Object(f.jsxs)("div",{class:"form-group row",children:[Object(f.jsx)("label",{for:"",class:"col-md-4 col-form-label",children:"Round Off Total"}),Object(f.jsx)("div",{class:"col-md-8",children:Object(f.jsx)("input",{readOnly:!0,value:Ce,type:"text",class:"form-control",id:""})})]})]})]})]}),Object(f.jsxs)("div",{class:"d-flex justify-content-center create-catagory-btns",children:[Object(f.jsxs)("button",{type:"button",onClick:function(){return window.location.reload()},class:"font-weight-bold m-3 py-2 px-4 btn btn-danger",children:["Cancel",Object(f.jsx)("i",{class:"px-2 fa fa-times","aria-hidden":"true"})]}),Object(f.jsxs)("button",{type:"button",onClick:function(){return function(){if(x&&S&&ke.length>0&&Qe){var e=function(){var e=Object(n.a)(s.a.mark((function e(){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d.d+"create-expense",{method:"POST",headers:{Authorization:t.token},body:l});case 2:if(1!=(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:c=e.sent,a(!1),200==c.status?window.location.reload():b.b.error(c.message);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a(!0);var r={invoiceNo:m,purchaseDate:x,currentParty:S,discountType:A},c={totalValue:Qe,finalAmount:0,roundOffTotal:Ce,paidAmount:Ee,remainAmount:0,finalDiscountValue:De,finalDiscountCriteria:Te,remarks:de,paymentMethod:Ve,taxableAmount:Be,discountAmount:Xe},o=[];o.push(r),o.push(c);var l=new FormData;l.append("final_array",JSON.stringify(o)),l.append("allItems",JSON.stringify(ke)),e()}else b.b.error("Please fill the data with *")}()},class:"font-weight-bold m-3 py-2 px-4 btn btn-success",children:["Save",Object(f.jsx)("i",{class:"px-2 fa fa-floppy-o","aria-hidden":"true"})]})]})]})]})}}}]);
//# sourceMappingURL=20.484d5b08.chunk.js.map