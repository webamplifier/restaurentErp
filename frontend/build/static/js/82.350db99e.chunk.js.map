{"version":3,"sources":["screens/Vehicles/Edit.js"],"names":["Edit","id","useParams","React","useContext","userContext","user","setLoad","useState","name","setName","image","setImage","serialNumber","setSerialNumber","plateNumber","setPlateNumber","transmissionType","setTransmissionType","drivenWheels","setDrivenWheels","allClients","setAllClients","currentClient","setCurrentClient","useEffect","a","fetch","url","headers","token","response","ok","json","data","status","client_list","map","item","value","label","toast","error","message","vehicle_detail","car_name","serial_number","plate_number","transmission_type","client_id","client_name","car_image","driven_wheels","fetchData","catch","err","fetchItem","className","onSubmit","e","formData","FormData","append","method","body","window","location","origin","preventDefault","submit","handleSubmit","class","for","required","onChange","target","type","options","href","src","style","width","height","alt","onClick","reload","aria-hidden"],"mappings":"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","file":"static/js/82.350db99e.chunk.js","sourcesContent":["import React from 'react'\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport { url } from 'src/helpers/helpers';\r\nimport { userContext } from '../../context/UserContext';\r\nimport Select from 'react-select'\r\nimport {useParams} from 'react-router-dom';\r\n\r\nexport default function Edit() {\r\n    const {id} = useParams();\r\n    const { user,setLoad } = React.useContext(userContext);\r\n    const [name, setName] = React.useState('');\r\n    const [image, setImage] = React.useState('');\r\n    const [serialNumber, setSerialNumber] = React.useState('');\r\n    const [plateNumber, setPlateNumber] = React.useState('');\r\n    const [transmissionType, setTransmissionType] = React.useState('');\r\n    const [drivenWheels, setDrivenWheels] = React.useState('');\r\n    const [allClients, setAllClients] = React.useState([]);\r\n    const [currentClient, setCurrentClient] = React.useState('');\r\n\r\n    const handleSubmit = e => {\r\n        setLoad(true)\r\n        e.preventDefault();\r\n        async function submit(){\r\n            const formData = new FormData();\r\n            formData.append('car_name',name);\r\n            formData.append('serial_number',serialNumber);\r\n            formData.append('plate_number',plateNumber);\r\n            formData.append('transmission_type',transmissionType);\r\n            formData.append('driven_wheels',drivenWheels);\r\n            formData.append('client_id',currentClient.value);\r\n            formData.append('client_name',currentClient.label);\r\n            \r\n            const response = await fetch(url + 'updatevehicle/' + id,{\r\n                method : 'POST',\r\n                headers : {\r\n                    'Authorization' : user?.token\r\n                },\r\n                body : formData\r\n            });\r\n\r\n            if (response.ok === true){\r\n                const data = await response.json();\r\n                setLoad(false)\r\n                if (data.status == 200){\r\n                    window.location = window.location.origin + '/#/vehicleList';\r\n                }else{\r\n                    toast.error(data.message)\r\n                }\r\n            }else{\r\n                toast.error('Oops something went wrong!')\r\n            }\r\n        }\r\n        submit().catch(err=>toast.error('Internal server error. Please try again later'))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setLoad(true)\r\n        async function fetchData() {\r\n            const response = await fetch(url + 'clientlist', {\r\n                headers: {\r\n                    'Authorization': user?.token,\r\n                }\r\n            });\r\n\r\n            if (response.ok === true) {\r\n                const data = await response.json();\r\n                setLoad(false)\r\n                if (data.status == 200) {\r\n                    setAllClients(data.client_list.map(item => {\r\n                        return {\r\n                            value: item.id,\r\n                            label: item.name\r\n                        }\r\n                    }))\r\n                } else {\r\n                    toast.error(data.message);\r\n                }\r\n            } else {\r\n                toast.error('Oops something went wrong!');\r\n            }\r\n        }\r\n        fetchData().catch(err => toast.error('Internal Server Error. Please try again later!'))\r\n\r\n        async function fetchItem(){\r\n            setLoad(true)\r\n            const response = await fetch(url + 'vehicleById/' + id,{\r\n                headers : {\r\n                    'Authorization' : user?.token\r\n                }\r\n            });\r\n\r\n            if (response.ok === true){\r\n                const data = await response.json();\r\n                setLoad(false)\r\n                if (data.status === 200){\r\n                    let vehicle_detail = data.vehicle_detail;\r\n                    setName(vehicle_detail?.car_name);\r\n                    setSerialNumber(vehicle_detail?.serial_number);\r\n                    setPlateNumber(vehicle_detail?.plate_number);\r\n                    setTransmissionType(vehicle_detail?.transmission_type);\r\n                    setCurrentClient({\r\n                        value : vehicle_detail?.client_id,\r\n                        label : vehicle_detail?.client_name\r\n                    });\r\n                    setImage(url + vehicle_detail.car_image);\r\n                    setDrivenWheels(vehicle_detail?.driven_wheels);\r\n                    \r\n                }else{\r\n                    toast.error(data.message);\r\n                }\r\n            }else{\r\n                toast.error('Oops something went wrong!');\r\n            }\r\n        }\r\n\r\n        fetchItem().catch(err=>toast.error('Internal server error!'));\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"container create-page-main-section\">\r\n            <ToastContainer />\r\n            <form onSubmit={e => handleSubmit(e)}>\r\n                <div className='p-sm-5 create-form-field'>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Vehicle Name:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input required value={name} onChange={e => setName(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Serial Number:</label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input value={serialNumber} onChange={e => setSerialNumber(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Plate Number:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input required value={plateNumber} onChange={e => setPlateNumber(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Transmission Type:</label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <select className=\"form-control\" value={transmissionType} onChange={e => setTransmissionType(e.target.value)}>\r\n                                <option value=\"Automatic Transmission\">Automatic Transmission (AT)</option>\r\n                                <option value=\"Manual Transmission\">Manual Transmission (MT)</option>\r\n                                <option value=\"Automated Manual Transmission\">Automated Manual Transmission (AM)</option>\r\n                                <option value=\"Continuously Variable Transmission\">Continuously Variable Transmission (CVT)</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Client:</label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <Select className=\"form-control\" options={allClients} value={currentClient} onChange={setCurrentClient} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* <div class=\"form-group row\">\r\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Choose Image:</label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <input type=\"file\" onChange={e => setImage(e.target.files[0])} />\r\n                        </div>\r\n                    </div> */}\r\n\r\n                    {image && <div className=\"form-group\">\r\n                        <a href={image} target=\"_blank\">\r\n                            <img src={image} style={{ width: '100%',height:200 }} alt=\"\" />\r\n                        </a>\r\n                    </div>}\r\n\r\n\r\n\r\n                    <div class=\"form-group row\">\r\n                        <label class=\"col-sm-2 col-form-label\" for=\"exampleFormControlTextarea1\">Driven Wheels:<span className='required-label'>*</span></label>\r\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\r\n                            <select className=\"form-control\" value={drivenWheels} onChange={e => setDrivenWheels(e.target.value)}>\r\n                                <option value=\"Front-wheel drive\">Front-wheel drive</option>\r\n                                <option value=\"Rear-wheel drive\">Rear-wheel drive</option>\r\n                                <option value=\"Two-wheel drive\">Two-wheel drive</option>\r\n                                <option value=\"All-wheel drive\">All-wheel drive</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"d-flex justify-content-center create-catagory-btns\">\r\n                    <button onClick={() => window.location.reload()} type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-danger\">Cancel<i\r\n                        class=\"px-2 fa fa-times\" aria-hidden=\"true\"></i></button>\r\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-success\">Save<i\r\n                        class=\"px-2 fa fa-floppy-o\" aria-hidden=\"true\"></i></button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n"],"sourceRoot":""}